(this["webpackJsonpsmartgarden-assets-new"]=this["webpackJsonpsmartgarden-assets-new"]||[]).push([[0],{33:function(e,t,c){},35:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var a,n=c(1),s=c.n(n),i=c(25),r=c.n(i),l=c(9),o=c(5),u=(c(33),c(34),c(10)),j=c(3),d=c(2),b=(c(35),"4fafc201-1fb5-459e-8fcc-c5c9c331914b"),m="beb5483e-36e1-4688-b7f5-ea07361b26a8",h="a10b02a4-3b1c-45b5-a617-5648120f8e4c",O="9a0c0611-a48f-4dbc-bde2-31582e606ee5",f="c3134125-b92d-479f-a437-2de8cea412e7",x=c(26),k=c.n(x),g=c(27),p=c.n(g),v=c(0);var N=function(e){var t=e.temperature,c=e.temperatureGround,s=e.moisture,i=Object(n.useRef)(null),r=Object(n.useRef)(null),l=Object(n.useState)([]),o=Object(j.a)(l,2),d=o[0],b=o[1],m=Object(n.useState)([]),h=Object(j.a)(m,2),O=h[0],f=h[1],x=Object(n.useState)([]),g=Object(j.a)(x,2),N=g[0],w=g[1];return Object(n.useEffect)((function(){a=new k.a(i.current.getContext("2d"),{type:"line",data:{datasets:[{label:"Temperature 1",yAxisID:"y",backgroundColor:"rgba(255, 0, 0, 0.3)",borderColor:"rgba(255, 0, 0, 0.4)"},{label:"Temperature 2",yAxisID:"y",backgroundColor:"rgba(0, 255, 0, 0.3)",borderColor:"rgba(0, 255, 0, 0.4)"},{label:"Moist",yAxisID:"y1",backgroundColor:"rgba(0, 0, 255, 0.3)",borderColor:"rgba(0, 0, 255, 0.4)",fill:!0}]},options:{animation:!1,scales:{y:{type:"linear",display:!0,position:"left",ticks:{callback:function(e,t,c){return"".concat(e," \xb0C")}}},y1:{type:"linear",display:!0,position:"right",ticks:{callback:function(e,t,c){return"".concat(e," %")}},grid:{drawOnChartArea:!1}}}}}),p.a.modal(r.current).show()}),[]),Object(n.useEffect)((function(){t&&c&&s&&(b([].concat(Object(u.a)(d),[t])),f([].concat(Object(u.a)(O),[c])),w([].concat(Object(u.a)(N),[s])),a.data.labels=d.slice(Math.max(d.length-20,0)).map((function(e,t){return t})),a.data.datasets[0].data=d.slice(Math.max(d.length-20,0)),a.data.datasets[1].data=O.slice(Math.max(O.length-20,0)),a.data.datasets[2].data=N.slice(Math.max(N.length-20,0)),a.update())}),[t]),Object(v.jsx)("div",{className:"uk-section uk-section-small",children:Object(v.jsxs)("div",{className:"uk-container",children:[Object(v.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(v.jsx)("span",{children:"Details"})}),Object(v.jsx)("canvas",{style:{height:"80vh"},ref:i})]})})};var w=function(e){var t=e.temperature,c=e.temperatureGround,a=e.moisture,n=e.watering;return Object(v.jsx)("div",{children:Object(v.jsx)(N,{temperature:t,temperatureGround:c,moisture:a,watering:n})})};var y=function(e){var t=e.temperature,c=e.temperatureGround,a=e.moisture,n=e.watering,s=e.setShowDiagram;return Object(v.jsxs)("div",{className:"uk-section uk-section-small",children:[Object(v.jsxs)("div",{className:"uk-container",children:[Object(v.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(v.jsx)("span",{children:"Dashboard"})}),Object(v.jsxs)("div",{className:"uk-child-width-1-2 uk-grid-small uk-grid-match uk-text-center","uk-grid":"true",children:[Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"uk-card uk-card-default uk-card-body",children:[Object(v.jsx)("span",{className:"uk-display-block uk-text-large",children:Object(v.jsx)("i",{className:"fas fa-temperature-high"})}),Object(v.jsxs)("span",{className:"uk-h4",children:[t," \xb0C"]})]})}),Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"uk-card uk-card-default uk-card-body",children:[Object(v.jsx)("span",{className:"uk-display-block uk-text-large",children:Object(v.jsx)("i",{className:"fas fa-temperature-high"})}),Object(v.jsxs)("span",{className:"uk-h4",children:[c," \xb0C"]})]})}),Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"uk-card uk-card-default uk-card-body",children:[Object(v.jsx)("span",{className:"uk-display-block uk-text-large",children:Object(v.jsx)("i",{className:"fas fa-water"})}),Object(v.jsxs)("span",{className:"uk-h4",children:[a," %"]})]})}),Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"uk-card uk-card-default uk-card-body",children:[Object(v.jsx)("span",{className:"uk-display-block uk-text-large",children:Object(v.jsx)("i",{className:"fas fa-power-off"})}),Object(v.jsx)("span",{className:"uk-h4",children:n})]})})]})]}),Object(v.jsx)("div",{className:"uk-container uk-margin-top",children:Object(v.jsx)("button",{className:"uk-button uk-button-default uk-width-1-1 uk-margin-small-bottom",onClick:function(){s(!0)},"uk-toggle":"true",children:Object(v.jsxs)("span",{children:[Object(v.jsx)("i",{className:"fas fa-chart-area"})," Details"]})})}),Object(v.jsx)("div",{className:"uk-container",children:Object(v.jsxs)(l.b,{className:"uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom",to:"/watering",children:[Object(v.jsx)("i",{className:"fas fa-hand-holding-water"})," Bew\xe4sserung"]})})]})};var S=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))};var C=function(e){var t=e.connected,c=e.device,a=Object(n.useState)(!1),s=Object(j.a)(a,2),i=s[0],r=s[1],l=Object(n.useState)(null),o=Object(j.a)(l,2),u=o[0],d=o[1],x=Object(n.useState)(null),k=Object(j.a)(x,2),g=k[0],p=k[1],N=Object(n.useState)(null),C=Object(j.a)(N,2),E=C[0],D=C[1],T=Object(n.useState)(null),I=Object(j.a)(T,2),G=I[0],A=I[1];return Object(n.useEffect)((function(){if(console.log("useEffect home"),t&&null!==c)return window.ble.startNotification(c.id,b,m,(function(e){console.log("setTemperature",S(e)),d(S(e))}),(function(){})),window.ble.startNotification(c.id,b,h,(function(e){console.log("setTemperatureGround",S(e)),p(S(e))}),(function(){})),window.ble.startNotification(c.id,b,O,(function(e){console.log("setMoisture",S(e)),D(S(e))}),(function(){})),window.ble.startNotification(c.id,b,f,(function(e){console.log("setWatering",S(e)),A(S(e))}),(function(){})),function(){console.log("useEffect home goodbye"),window.ble.stopNotification(c.id,b,m,(function(){}),(function(){})),window.ble.stopNotification(c.id,b,h,(function(){}),(function(){})),window.ble.stopNotification(c.id,b,O,(function(){}),(function(){})),window.ble.stopNotification(c.id,b,f,(function(){}),(function(){}))}}),[t,c]),Object(v.jsxs)(v.Fragment,{children:[t&&!i&&Object(v.jsx)(y,{temperature:u,temperatureGround:g,moisture:E,watering:G,setShowDiagram:r}),t&&i&&Object(v.jsx)(w,{temperature:u,temperatureGround:g,moisture:E,watering:G})]})};var E=function(){return Object(v.jsx)("div",{children:"Settings"})};var D=function(e){var t=e.devices,c=e.selectDevice;return Object(v.jsx)("div",{className:"uk-section uk-section-small",children:Object(v.jsxs)("div",{className:"uk-container",children:[Object(v.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(v.jsx)("span",{children:"Ger\xe4teauswahl"})}),t.length>0&&Object(v.jsx)("div",{children:t.map((function(e){return Object(v.jsxs)("div",{onClick:function(){c(e)},children:[Object(v.jsx)("h3",{children:e.name}),Object(v.jsxs)("p",{children:[e.id," ",e.rssi]})]},e.name)}))})]})})},T=c(14),I=c(20);var G=function(){var e=Object(n.useState)(0),t=Object(j.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)({startTime:"12:00",duration:360,interval:0,smart:!1}),i=Object(j.a)(s,2),r=i[0],l=i[1],o=function(e){l((function(t){return Object(I.a)(Object(I.a)({},t),{},Object(T.a)({},e.target.name,e.target.value))}))};return Object(v.jsxs)(n.Fragment,{children:[Object(v.jsx)("div",{className:"uk-section uk-section-small",children:Object(v.jsxs)("div",{className:"uk-container",children:[Object(v.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(v.jsx)("span",{children:"Bew\xe4sserung"})}),Object(v.jsx)("form",{className:"uk-form-stacked",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{className:"uk-form-label",children:"Profile"}),Object(v.jsx)("div",{className:"uk-form-controls",children:Object(v.jsxs)("select",{value:c,onChange:function(e){a(e.target.value)},name:"profile",className:"uk-select",children:[Object(v.jsx)("option",{value:"0",children:"Bitte w\xe4hlen"}),Object(v.jsx)("option",{value:"1",children:"Profil 1"}),Object(v.jsx)("option",{value:"2",children:"Profil 2"}),Object(v.jsx)("option",{value:"3",children:"Profil 3"})]})})]})})]})}),c>0&&Object(v.jsx)("div",{className:"uk-section uk-section-small",children:Object(v.jsxs)("div",{className:"uk-container",children:[Object(v.jsx)("h3",{className:"uk-heading-line uk-text-center",children:Object(v.jsxs)("span",{children:["Profil ",c]})}),Object(v.jsxs)("form",{className:"uk-form-stacked",onSubmit:function(e){e.preventDefault(),console.log(r)},children:[Object(v.jsxs)("div",{className:"uk-margin",children:[Object(v.jsx)("label",{className:"uk-form-label",children:"Startzeit"}),Object(v.jsx)("div",{className:"uk-form-controls",children:Object(v.jsx)("input",{className:"uk-input",type:"time",name:"startTime",value:r.startTime,onChange:o})})]}),Object(v.jsxs)("div",{className:"uk-margin",children:[Object(v.jsx)("label",{className:"uk-form-label",children:"Dauer"}),Object(v.jsx)("div",{className:"uk-form-controls",children:Object(v.jsx)("input",{className:"uk-input",type:"text",name:"duration",value:r.duration,onChange:o})})]}),Object(v.jsxs)("div",{className:"uk-margin",children:[Object(v.jsx)("label",{className:"uk-form-label",children:"Interval"}),Object(v.jsx)("div",{className:"uk-form-controls",children:Object(v.jsxs)("select",{className:"uk-select",name:"interval",value:r.interval,onChange:o,children:[Object(v.jsx)("option",{value:"0",children:"3 mal t\xe4glich"}),Object(v.jsx)("option",{value:"1",children:"2 mal t\xe4glich"}),Object(v.jsx)("option",{value:"2",children:"1 mal t\xe4glich"}),Object(v.jsx)("option",{value:"3",children:"Alle zwei Tage"}),Object(v.jsx)("option",{value:"4",children:"Alle drei Tage"}),Object(v.jsx)("option",{value:"5",children:"Einmal die Woche"})]})})]}),Object(v.jsxs)("div",{className:"uk-margin",children:[Object(v.jsx)("label",{className:"uk-form-label",children:"Smarte Bew\xe4sserung"}),Object(v.jsxs)("div",{className:"uk-form-controls",children:[Object(v.jsx)("input",{className:"uk-checkbox",name:"smart",checked:r.smart,onChange:o,type:"checkbox"})," Sensoren verwenden"]})]}),Object(v.jsx)("div",{className:"uk-margin",children:Object(v.jsx)("button",{className:"uk-button uk-button-primary",type:"submit",children:"Submit"})})]})]})})]})};var A=function(){var e=Object(d.f)(),t=Object(d.g)(),c=JSON.parse(sessionStorage.getItem("deviceId")),a=Object(n.useState)(!1),s=Object(j.a)(a,2),i=s[0],r=s[1],l=Object(n.useState)(!1),o=Object(j.a)(l,2),m=o[0],h=o[1],O=Object(n.useState)(null),f=Object(j.a)(O,2),x=f[0],k=f[1],g=Object(n.useState)(c),p=Object(j.a)(g,2),N=p[0],w=p[1],y=Object(n.useState)([]),S=Object(j.a)(y,2),T=S[0],I=S[1];return Object(n.useEffect)((function(){m&&(sessionStorage.setItem("deviceId",JSON.stringify(N)),"/"===t.pathname&&e.push("/home"))}),[m,N,e,t]),Object(n.useEffect)((function(){N||"/"===t.pathname||e.push("/")}),[e,N,t]),Object(n.useEffect)((function(){N&&i&&window.ble.stopScan((function(){}),(function(){}))}),[N,i]),Object(n.useEffect)((function(){N&&(r(!1),window.ble.connect(N.id,(function(){h(!0)})))}),[N]),Object(n.useEffect)((function(){N||(r(!0),window.ble.startScan([b],(function(e){k(e)}),(function(){})))}),[N]),Object(n.useEffect)((function(){x&&I((function(e){return[].concat(Object(u.a)(e),[x])}))}),[x]),Object(v.jsxs)(d.c,{children:[Object(v.jsx)(d.a,{exact:!0,path:"/watering",children:Object(v.jsx)(G,{})}),Object(v.jsx)(d.a,{exact:!0,path:"/settings",children:Object(v.jsx)(E,{})}),Object(v.jsx)(d.a,{exact:!0,path:"/home",children:Object(v.jsx)(C,{connected:m,device:N})}),Object(v.jsx)(d.a,{exact:!0,path:"/",children:Object(v.jsx)(D,{devices:T,selectDevice:w})})]})},M=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,62)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),s(e),i(e)}))},P=Object(o.a)();document.addEventListener("deviceready",(function(){r.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(l.a,{history:P,children:Object(v.jsx)(A,{})})}),document.getElementById("root"))}),!1),M()}},[[61,1,2]]]);
//# sourceMappingURL=main.52d2d87c.chunk.js.map