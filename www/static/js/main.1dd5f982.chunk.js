(this["webpackJsonpsmartgarden-assets-new"]=this["webpackJsonpsmartgarden-assets-new"]||[]).push([[0],{35:function(e,t,c){},36:function(e,t,c){},62:function(e,t,c){"use strict";c.r(t);var a,s=c(1),n=c.n(s),i=c(26),l=c.n(i),r=c(10),o=c(5),u=(c(35),c(12)),d=c(2),j=c(3),b=(c(36),"4fafc201-1fb5-459e-8fcc-c5c9c331914b"),m="4de76262-8d84-4ba6-bb3a-2f2716a6c28f",h="6bef33fc-dadc-408e-98e9-d6c8cb35e976",O="40a47f70-752b-4598-91ad-748cdbc7958a",x=c(27),f=c.n(x),k=c(16),g=c.n(k),p=c(0);var v=function(e){var t=e.temperature,c=e.temperatureGround,n=e.moisture,i=Object(s.useRef)(null),l=Object(s.useRef)(null),r=Object(s.useState)([]),o=Object(d.a)(r,2),j=o[0],b=o[1],m=Object(s.useState)([]),h=Object(d.a)(m,2),O=h[0],x=h[1],k=Object(s.useState)([]),v=Object(d.a)(k,2),N=v[0],w=v[1];return Object(s.useEffect)((function(){a=new f.a(i.current.getContext("2d"),{type:"line",data:{datasets:[{label:"Temperature 1",yAxisID:"y",backgroundColor:"rgba(255, 0, 0, 0.3)",borderColor:"rgba(255, 0, 0, 0.4)"},{label:"Temperature 2",yAxisID:"y",backgroundColor:"rgba(0, 255, 0, 0.3)",borderColor:"rgba(0, 255, 0, 0.4)"},{label:"Moist",yAxisID:"y1",backgroundColor:"rgba(0, 0, 255, 0.3)",borderColor:"rgba(0, 0, 255, 0.4)",fill:!0}]},options:{animation:!1,scales:{y:{type:"linear",display:!0,position:"left",ticks:{callback:function(e,t,c){return"".concat(e," \xb0C")}}},y1:{type:"linear",display:!0,position:"right",ticks:{callback:function(e,t,c){return"".concat(e," %")}},grid:{drawOnChartArea:!1}}}}}),g.a.modal(l.current).show()}),[]),Object(s.useEffect)((function(){t&&c&&n&&(b([].concat(Object(u.a)(j),[t])),x([].concat(Object(u.a)(O),[c])),w([].concat(Object(u.a)(N),[n])),a.data.labels=j.slice(Math.max(j.length-20,0)).map((function(e,t){return t})),a.data.datasets[0].data=j.slice(Math.max(j.length-20,0)),a.data.datasets[1].data=O.slice(Math.max(O.length-20,0)),a.data.datasets[2].data=N.slice(Math.max(N.length-20,0)),a.update())}),[t]),Object(p.jsx)("div",{className:"uk-section uk-section-small",children:Object(p.jsxs)("div",{className:"uk-container",children:[Object(p.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(p.jsx)("span",{children:"Details"})}),Object(p.jsx)("canvas",{style:{height:"80vh"},ref:i})]})})};var N=function(e){var t=e.temperature,c=e.temperatureGround,a=e.moisture,s=e.watering;return Object(p.jsx)("div",{children:Object(p.jsx)(v,{temperature:t,temperatureGround:c,moisture:a,watering:s})})};var w=function(e){var t=e.temperature,c=e.temperatureGround,a=e.moisture,s=e.watering,n=e.setShowDiagram;return Object(p.jsxs)("div",{className:"uk-section uk-section-small",children:[Object(p.jsxs)("div",{className:"uk-container",children:[Object(p.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(p.jsx)("span",{children:"Dashboard"})}),Object(p.jsxs)("div",{className:"uk-child-width-1-2 uk-grid-small uk-grid-match uk-text-center","uk-grid":"true",children:[Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"uk-card uk-card-default uk-card-body",children:[Object(p.jsx)("span",{className:"uk-display-block uk-text-large",children:Object(p.jsx)("i",{className:"fas fa-temperature-high"})}),Object(p.jsxs)("span",{className:"uk-h4",children:[t," \xb0C"]})]})}),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"uk-card uk-card-default uk-card-body",children:[Object(p.jsx)("span",{className:"uk-display-block uk-text-large",children:Object(p.jsx)("i",{className:"fas fa-temperature-high"})}),Object(p.jsxs)("span",{className:"uk-h4",children:[c," \xb0C"]})]})}),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"uk-card uk-card-default uk-card-body",children:[Object(p.jsx)("span",{className:"uk-display-block uk-text-large",children:Object(p.jsx)("i",{className:"fas fa-water"})}),Object(p.jsxs)("span",{className:"uk-h4",children:[a," %"]})]})}),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"uk-card uk-card-default uk-card-body",children:[Object(p.jsx)("span",{className:"uk-display-block uk-text-large",children:Object(p.jsx)("i",{className:"fas fa-power-off"})}),Object(p.jsx)("span",{className:"uk-h4",children:s})]})})]})]}),Object(p.jsx)("div",{className:"uk-container uk-margin-top",children:Object(p.jsx)("button",{className:"uk-button uk-button-default uk-width-1-1 uk-margin-small-bottom",onClick:function(){n(!0)},"uk-toggle":"true",children:Object(p.jsxs)("span",{children:[Object(p.jsx)("i",{className:"fas fa-chart-area"})," Details"]})})}),Object(p.jsx)("div",{className:"uk-container",children:Object(p.jsxs)(r.b,{className:"uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom",to:"/watering",children:[Object(p.jsx)("i",{className:"fas fa-hand-holding-water"})," Bew\xe4sserung"]})}),Object(p.jsx)("div",{className:"uk-container",children:Object(p.jsxs)(r.b,{className:"uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom",to:"/settings",children:[Object(p.jsx)("i",{className:"fas fa-hand-holding-water"})," Einstellungen"]})})]})};var y=function(){return Object(p.jsx)("div",{className:"uk-section uk-section-small uk-section-muted",children:Object(p.jsxs)("div",{className:"uk-container",children:[Object(p.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(p.jsx)("span",{children:"Gartenmonat"})}),Object(p.jsxs)("div",{className:"uk-position-relative uk-visible-toggle uk-dark",tabIndex:"-1","uk-slider":"center: true",children:[Object(p.jsxs)("ul",{className:"uk-slider-items uk-grid",children:[Object(p.jsx)("li",{className:"uk-width-3-4",children:Object(p.jsxs)("div",{className:"uk-card uk-card-default",children:[Object(p.jsx)("div",{className:"uk-card-media-top",children:Object(p.jsx)("img",{src:"images/photo.jpg",alt:""})}),Object(p.jsxs)("div",{className:"uk-card-body",children:[Object(p.jsx)("h3",{className:"uk-card-title",children:"April"}),Object(p.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt."})]})]})}),Object(p.jsx)("li",{className:"uk-width-3-4",children:Object(p.jsxs)("div",{className:"uk-card uk-card-default",children:[Object(p.jsx)("div",{className:"uk-card-media-top",children:Object(p.jsx)("img",{src:"images/photo.jpg",alt:""})}),Object(p.jsxs)("div",{className:"uk-card-body",children:[Object(p.jsx)("h3",{className:"uk-card-title",children:"Mai"}),Object(p.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt."})]})]})})]}),Object(p.jsx)("button",{className:"uk-position-center-left uk-position-small uk-hidden-hover",href:"#prev","uk-slidenav-previous":"true","uk-slider-item":"previous",children:"\xa0"}),Object(p.jsx)("button",{className:"uk-position-center-right uk-position-small uk-hidden-hover",href:"#next","uk-slidenav-next":"true","uk-slider-item":"next",children:"\xa0"})]})]})})};var S=function(e){var t=e.connected,c=e.device,a=Object(s.useState)(!1),n=Object(d.a)(a,2),i=n[0],l=n[1],r=Object(s.useState)(null),o=Object(d.a)(r,2),u=o[0],j=(o[1],Object(s.useState)(null)),b=Object(d.a)(j,2),m=b[0],h=(b[1],Object(s.useState)(null)),O=Object(d.a)(h,2),x=O[0],f=(O[1],Object(s.useState)(null)),k=Object(d.a)(f,2),g=k[0];return k[1],Object(s.useEffect)((function(){if(console.log("useEffect home"),t&&null!==c)return function(){console.log("useEffect home goodbye")}}),[t,c]),Object(p.jsxs)(p.Fragment,{children:[t&&!i&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(w,{temperature:u,temperatureGround:m,moisture:x,watering:g,setShowDiagram:l}),Object(p.jsx)(y,{})]}),t&&i&&Object(p.jsx)(N,{temperature:u,temperatureGround:m,moisture:x,watering:g})]})},C=c(11),E=c(8),D=c(29),T=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},I=function(e){for(var t=new Uint8Array(e.length),c=0,a=e.length;c<a;c++)t[c]=e.charCodeAt(c);return t.buffer};var A=function(e){var t=e.device,c=Object(s.useState)(null),a=Object(d.a)(c,2),n=a[0],i=a[1],l=Object(s.useState)(null),r=Object(d.a)(l,2),o=r[0],u=r[1],j=Object(s.useState)(null),x=Object(d.a)(j,2),f=x[0],k=x[1],g=Object(s.useState)({dateTime:""|n,location:""|o,flowRate:""|f}),v=Object(d.a)(g,2),N=v[0],w=v[1],y=function(e){w((function(t){return Object(E.a)(Object(E.a)({},t),{},Object(C.a)({},e.target.name,e.target.value))}))};return Object(s.useEffect)((function(){t&&(console.log("read values",t,b,m),window.ble.read(t.id,b,m,(function(e){console.log("setDateTime",T(e)),i(T(e))}),(function(e){console.log(e)})),window.ble.read(t.id,b,h,(function(e){console.log("setLocation",T(e)),u(T(e))}),(function(e){console.log(e)})),window.ble.read(t.id,b,O,(function(e){console.log("setFlowRate",T(e)),k(T(e))}),(function(e){console.log(e)})))}),[t]),Object(s.useEffect)((function(){n&&w((function(e){return Object(E.a)(Object(E.a)({},e),{},{dateTime:n})})),o&&w((function(e){return Object(E.a)(Object(E.a)({},e),{},{location:o})})),f&&w((function(e){return Object(E.a)(Object(E.a)({},e),{},{flowRate:f})}))}),[n,o,f]),Object(p.jsx)("div",{className:"uk-section uk-section-small",children:Object(p.jsxs)("div",{className:"uk-container",children:[Object(p.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(p.jsx)("span",{children:"Einstellungen"})}),Object(p.jsxs)("form",{className:"uk-form-stacked",onSubmit:function(e){e.preventDefault(),console.log(N),window.ble.write(t.id,b,m,I(N.dateTime),(function(e){console.log("foo")})),window.ble.write(t.id,b,h,I(N.location),(function(e){console.log("foo")})),window.ble.write(t.id,b,O,I(N.flowRate),(function(e){console.log("foo")}))},children:[Object(p.jsxs)("div",{className:"uk-margin",children:[Object(p.jsx)("label",{className:"uk-form-label",children:"Datum und Uhrzeit"}),Object(p.jsx)("div",{className:"uk-form-controls",children:Object(p.jsx)("input",{className:"uk-input",type:"date-time",name:"dateTime",value:N.dateTime,onChange:y})})]}),Object(p.jsxs)("div",{className:"uk-margin",children:[Object(p.jsx)("label",{className:"uk-form-label",children:"Location"}),Object(p.jsx)("div",{className:"uk-form-controls",children:Object(p.jsxs)("div",{className:"uk-inline uk-width-1-1",children:[Object(p.jsx)("button",{type:"button",className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: location",onClick:function(){navigator.geolocation.getCurrentPosition((function(e){console.log(e),console.log(Object(D.getSunrise)(e.coords.latitude,e.coords.longitude)),u("".concat(e.coords.latitude,";").concat(e.coords.longitude))}),(function(e){console.log(e)}))}}),Object(p.jsx)("input",{className:"uk-input",type:"text",name:"location",value:N.location,onChange:y})]})})]}),Object(p.jsxs)("div",{className:"uk-margin",children:[Object(p.jsx)("label",{className:"uk-form-label",children:"Flu\xdfrate"}),Object(p.jsx)("div",{className:"uk-form-controls",children:Object(p.jsx)("input",{className:"uk-input",type:"text",name:"flowRate",value:N.flowRate,onChange:y})})]}),Object(p.jsx)("div",{className:"uk-margin",children:Object(p.jsx)("button",{className:"uk-button uk-button-primary",type:"submit",children:"Submit"})})]})]})})};var F=function(e){var t=e.devices,c=e.selectDevice;return Object(p.jsx)("div",{className:"uk-section uk-section-small",children:Object(p.jsxs)("div",{className:"uk-container",children:[Object(p.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(p.jsx)("span",{children:"Ger\xe4teauswahl"})}),t.length>0&&Object(p.jsx)("div",{children:t.map((function(e){return Object(p.jsxs)("div",{onClick:function(){c(e)},children:[Object(p.jsx)("h3",{children:e.name}),Object(p.jsxs)("p",{children:[e.id," ",e.rssi]})]},e.name)}))})]})})};var G=function(){var e=Object(s.useState)(0),t=Object(d.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)({startTime:"12:00",duration:360,interval:0,smart:!1}),i=Object(d.a)(n,2),l=i[0],r=i[1],o=function(e){r((function(t){return Object(E.a)(Object(E.a)({},t),{},Object(C.a)({},e.target.name,e.target.value))}))};return Object(p.jsxs)(s.Fragment,{children:[Object(p.jsx)("div",{className:"uk-section uk-section-small",children:Object(p.jsxs)("div",{className:"uk-container",children:[Object(p.jsx)("h2",{className:"uk-heading-line uk-text-center",children:Object(p.jsx)("span",{children:"Bew\xe4sserung"})}),Object(p.jsx)("form",{className:"uk-form-stacked",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{className:"uk-form-label",children:"Profile"}),Object(p.jsx)("div",{className:"uk-form-controls",children:Object(p.jsxs)("select",{value:c,onChange:function(e){a(e.target.value)},name:"profile",className:"uk-select",children:[Object(p.jsx)("option",{value:"0",children:"Bitte w\xe4hlen"}),Object(p.jsx)("option",{value:"1",children:"Profil 1"}),Object(p.jsx)("option",{value:"2",children:"Profil 2"}),Object(p.jsx)("option",{value:"3",children:"Profil 3"})]})})]})})]})}),c>0&&Object(p.jsx)("div",{className:"uk-section uk-section-small",children:Object(p.jsxs)("div",{className:"uk-container",children:[Object(p.jsx)("h3",{className:"uk-heading-line uk-text-center",children:Object(p.jsxs)("span",{children:["Profil ",c]})}),Object(p.jsxs)("form",{className:"uk-form-stacked",onSubmit:function(e){e.preventDefault(),console.log(l)},children:[Object(p.jsxs)("div",{className:"uk-margin",children:[Object(p.jsx)("label",{className:"uk-form-label",children:"Startzeit"}),Object(p.jsx)("div",{className:"uk-form-controls",children:Object(p.jsx)("input",{className:"uk-input",type:"time",name:"startTime",value:l.startTime,onChange:o})})]}),Object(p.jsxs)("div",{className:"uk-margin",children:[Object(p.jsx)("label",{className:"uk-form-label",children:"Dauer"}),Object(p.jsx)("div",{className:"uk-form-controls",children:Object(p.jsx)("input",{className:"uk-input",type:"text",name:"duration",value:l.duration,onChange:o})})]}),Object(p.jsxs)("div",{className:"uk-margin",children:[Object(p.jsx)("label",{className:"uk-form-label",children:"Interval"}),Object(p.jsx)("div",{className:"uk-form-controls",children:Object(p.jsxs)("select",{className:"uk-select",name:"interval",value:l.interval,onChange:o,children:[Object(p.jsx)("option",{value:"0",children:"3 mal t\xe4glich"}),Object(p.jsx)("option",{value:"1",children:"2 mal t\xe4glich"}),Object(p.jsx)("option",{value:"2",children:"1 mal t\xe4glich"}),Object(p.jsx)("option",{value:"3",children:"Alle zwei Tage"}),Object(p.jsx)("option",{value:"4",children:"Alle drei Tage"}),Object(p.jsx)("option",{value:"5",children:"Einmal die Woche"})]})})]}),Object(p.jsxs)("div",{className:"uk-margin",children:[Object(p.jsx)("label",{className:"uk-form-label",children:"Smarte Bew\xe4sserung"}),Object(p.jsxs)("div",{className:"uk-form-controls",children:[Object(p.jsx)("input",{className:"uk-checkbox",name:"smart",checked:l.smart,onChange:o,type:"checkbox"})," Sensoren verwenden"]})]}),Object(p.jsx)("div",{className:"uk-margin",children:Object(p.jsx)("button",{className:"uk-button uk-button-primary",type:"submit",children:"Submit"})})]})]})})]})},P=c(30),R=c.n(P);var L=function(){var e=Object(j.f)(),t=Object(j.g)(),c=JSON.parse(sessionStorage.getItem("deviceId")),a=Object(s.useState)(!1),n=Object(d.a)(a,2),i=n[0],l=n[1],r=Object(s.useState)(!1),o=Object(d.a)(r,2),m=o[0],h=o[1],O=Object(s.useState)(null),x=Object(d.a)(O,2),f=x[0],k=x[1],v=Object(s.useState)(c),N=Object(d.a)(v,2),w=N[0],y=N[1],C=Object(s.useState)([]),E=Object(d.a)(C,2),D=E[0],T=E[1];return Object(s.useEffect)((function(){g.a.use(R.a)})),Object(s.useEffect)((function(){m&&(sessionStorage.setItem("deviceId",JSON.stringify(w)),"/"===t.pathname&&e.push("/home"))}),[m,w,e,t]),Object(s.useEffect)((function(){w||"/"===t.pathname||e.push("/")}),[e,w,t]),Object(s.useEffect)((function(){w&&i&&window.ble.stopScan((function(){}),(function(){}))}),[w,i]),Object(s.useEffect)((function(){w&&(l(!1),window.ble.connect(w.id,(function(){h(!0)})))}),[w]),Object(s.useEffect)((function(){w||(l(!0),window.ble.startScan([b],(function(e){k(e)}),(function(){})))}),[w]),Object(s.useEffect)((function(){f&&T((function(e){return[].concat(Object(u.a)(e),[f])}))}),[f]),Object(p.jsxs)(j.c,{children:[Object(p.jsx)(j.a,{exact:!0,path:"/watering",children:Object(p.jsx)(G,{})}),Object(p.jsx)(j.a,{exact:!0,path:"/settings",children:Object(p.jsx)(A,{device:w})}),Object(p.jsx)(j.a,{exact:!0,path:"/home",children:Object(p.jsx)(S,{connected:m,device:w})}),Object(p.jsx)(j.a,{exact:!0,path:"/",children:Object(p.jsx)(F,{devices:D,selectDevice:y})})]})},M=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,63)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),a(e),s(e),n(e),i(e)}))},B=Object(o.a)();document.addEventListener("deviceready",(function(){l.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(r.a,{history:B,children:Object(p.jsx)(L,{})})}),document.getElementById("root"))}),!1),M()}},[[62,1,2]]]);
//# sourceMappingURL=main.1dd5f982.chunk.js.map